# this applies the kansei edition apps and modifications
modules:
  - type: rpm-ostree
    repos:
      - https://copr.fedorainfracloud.org/coprs/ublue-os/staging/repo/fedora-%OS_VERSION%/ublue-os-staging-fedora-%OS_VERSION%.repo

  - type: rpm-ostree
    install:
      - fastfetch
      - stress-ng

  - type: default-flatpaks
    notify: false # Send notification after install/uninstall is finished (true/false)
    system:
      # If no repo information is specified, Flathub will be used by default
      # repo-url: https://dl.flathub.org/repo/flathub.flatpakrepo
      # repo-name: flathub
      # repo-title: "Flathub (system-wide)" # Optional; this sets the remote's user-facing name in graphical frontends like GNOME Software
      install:
        - io.github.dvlv.boxbuddyrs
        - org.chromium.Chromium
        - com.discordapp.Discord
        - com.github.tchx84.Flatseal
        - io.freetubeapp.FreeTube
        - it.mijorus.gearlever
        - rg.fedoraproject.MediaWriter
        - io.missioncenter.MissionCenter
        - md.obsidian.Obsidian
        - com.prusa3d.PrusaSlicer
        - im.riot.Riot
        - org.raspberrypi.rpi-imager

  - type: script
    snippets:
      if [ "${FEDORA_MAJOR_VERSION}" -eq "40" ]; then
        rpm-ostree override replace \
        --experimental \
        --from repo=copr:copr.fedorainfracloud.org:ublue-os:staging \
          vte291 \sudo sh -c 'echo -e "[1password]￼￼nname=1Password Stable Channel￼￼nbaseurl=https://downloads.1password.com/linux/rpm/stable/\$basearch\nenabled=1\ngpgcheck=1\nrepo_gpgcheck=1\ngpgkey=\https://downloads.1password.com/linux/keys/1password.asc\" > /etc/yum.repos.d/1password.repo'
          vte-profile
        rpm-ostree install ptyxis
     fi
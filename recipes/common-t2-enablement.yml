modules:
  - type: rpm-ostree
    repos:
      - https://copr.fedorainfracloud.org/coprs/sharpenedblade/t2linux/repo/fedora-%OS_VERSION%/sharpenedblade-t2linux-fedora-%OS_VERSION%.repo
 
  # - type: script
  #   snippets:
  #     - "rpm-ostree cliwrap install-to-root / && \
  #   rpm-ostree override replace --experimental --from repo=copr:copr.fedorainfracloud.org:sharpenedblade:t2linux kernel kernel-core kernel-modules kernel-modules-core kernel-modules-extra"
  #       # - "rpm-ostree kargs --append-if-missing=intel_iommu=on --append-if-missing=iommu=pt --append-if-missing=mem_sleep_default=s2idle"

  - type: script
    scripts:
      - apple-bcm-firmware.sh # pulls firmware sources from arch-t2 mirror, uses asahi-installer fork to package for use in fedora
      - t2-kernel.sh #overrides with T2 kernel, applies kernel args
      - t2-internal-ethernet-blocklist.sh
      
  - type: rpm-ostree
    install:
      - t2fanrd
      - rust-tiny-dfr
      - t2linux-audio